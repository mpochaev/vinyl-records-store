<!-- admin/vinyl-form.html -->
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Пластинка (форма)</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<th:block th:replace="~{fragments/nav :: navBar}"></th:block>

<h2 th:text="${vinylDTO.id != null} ? 'Редактировать пластинку' : 'Новая пластинка'">
    Форма пластинки
</h2>

<form th:action="@{${formAction}}" th:object="${vinylDTO}" method="post">
    <div th:if="${vinylDTO.id != null}">
        <input type="hidden" name="_method" value="put"/>
    </div>

    <div>
        <label for="title">Название:</label><br/>
        <input type="text" id="title" th:field="*{title}" />
        <div th:if="${#fields.hasErrors('title')}"
             th:errors="*{title}"
             style="color:red;"></div>
    </div>

    <div>
        <label for="artist">Исполнитель:</label><br/>
        <input type="text" id="artist" th:field="*{artist}" />
        <div th:if="${#fields.hasErrors('artist')}"
             th:errors="*{artist}"
             style="color:red;"></div>
    </div>

    <div>
        <label for="genre">Жанр:</label><br/>
        <select id="genre" th:field="*{genre}">
            <option value="">[Выберите жанр]</option>
            <option th:each="g : ${genres}"
                    th:value="${g}"
                    th:text="${g}">
            </option>
        </select>
        <div th:if="${#fields.hasErrors('genre')}"
             th:errors="*{genre}"
             style="color:red;"></div>
    </div>

    <div>
        <label for="releaseDate">Дата выхода:</label><br/>
        <input type="date" id="releaseDate" th:field="*{releaseDate}" />
        <div th:if="${#fields.hasErrors('releaseDate')}"
             th:errors="*{releaseDate}"
             style="color:red;"></div>
    </div>

    <div>
        <label for="description">Описание:</label><br/>
        <textarea id="description" th:field="*{description}" rows="3" cols="40"></textarea>
        <div th:if="${#fields.hasErrors('description')}"
             th:errors="*{description}"
             style="color:red;"></div>
    </div>

    <div>
        <label for="price">Цена (₽):</label><br/>
        <input type="number" step="0.01" id="price" th:field="*{price}" />
        <div th:if="${#fields.hasErrors('price')}"
             th:errors="*{price}"
             style="color:red;"></div>
    </div>

    <div>
        <label for="quantity">Количество на складе:</label><br/>
        <input type="number" id="quantity" th:field="*{quantity}" />
        <div th:if="${#fields.hasErrors('quantity')}"
             th:errors="*{quantity}"
             style="color:red;"></div>
    </div>

    <div>
        <label for="photo">Фото (имя файла):</label><br/>
        <input type="text" id="photo" th:field="*{photo}" />
    </div>

    <div th:if="${lastSupply != null}">
        <p><i>Дата последней поставки:</i>
            <span th:text="${#temporals.format(lastSupply, 'dd.MM.yyyy HH:mm')}">-</span>
        </p>
    </div>

    <button type="submit">Сохранить</button>
    <a th:href="@{/admin/vinyls}">Отмена</a>
</form>
</body>
</html>